const {Entity} = require("blockade/entity/entity");
const {Vector2} = require("blockade/vectors");

class Block extends Entity {
	/**
	 * @type {Vector2}
	 */
	velocity = new Vector2();

	/**
	 * Create new Block Instance
	 * @param {Blockade} game
	 * @param {Vector2} position
	 * @param {BlockType} type
	 */
	constructor(game, position, type) {
		super(game, position);
		this.type = type;
	}

	/**
	 * Detect if this Block can move in a specified direction
	 * @param {Vector2} direction
	 * @returns {boolean} success
	 */
	canMove(direction) {
		return this.type.canMove(this, direction);
	}

	/**
	 * Attempt to set the velocity of this Block to a specified direction
	 * @param {Vector2} direction
	 * @returns {boolean} success
	 */
	setVelocity(direction) {
		return this.type.setVelocity(this, direction);
	}

	update() {
		super.update();
		this.type.update(this);
		return this.changed;
	}
}

module.exports = {Block};